<html>
<body>
<script>
(function(){
	var split = function*(pattern){
		var match, currentPart = "", level = 0, rgx = /[^{}]+|[{}]/g;
		while((match = rgx.exec(pattern)) && (match = match[0])){
			if(match == "{"){
				if(currentPart && level == 0){
					yield currentPart;
					currentPart = "";
				}
				currentPart += match;
				level++;
			}else if(match == "}"){
				currentPart += match;
				level--;
				if(level == 0){
					yield currentPart;
					currentPart = "";
				}
			}else{
				currentPart += match;
			}
		}
		if(currentPart){
			yield currentPart;
		}
	};
	var product = function(...iterable1){
		return function*(...iterable2){
			for(let one of iterable1){
				for(let two of iterable2){
					yield (function*(){
						yield one;
						yield two;
					})();
				}
			}
		};
	};
	var productOfMany = function(...iterables){
		
	};
	console.log([...product(product(1,2)(3,4))(5,6)]);
	console.log([...split("dat is {,ook} {wel,niet{, erg}} leuk")]);
})();
</script>
</body>
</html>